{"ast":null,"code":"/* jshint node: true */\n\"use strict\";\n\nvar util = require(\"./lib/util.js\");\n\nvar lib = {};\nlib.getMacAddress = require(\"./lib/getmacaddress.js\");\nlib.getAllInterfaces = require(\"./lib/getallinterfaces.js\");\nlib.networkInterfaces = require(\"./lib/networkinterfaces.js\"); // devices like en0 (mac), eth3 (linux), Ethernet (windows), etc. are preferred\n\nvar goodIfaces = new RegExp(\"^((en|eth)[0-9]+|ethernet)$\", \"i\"); // https://github.com/scravy/node-macaddress/issues/32\n\nvar badIfaces = new RegExp(\"^(vboxnet[0-9]+)$\", \"i\");\n\nlib.one = function () {\n  // one() can be invoked in several ways:\n  // one() -> Promise<string>\n  // one(iface: string) -> Promise<string>\n  // one(iface: string, callback) -> async, yields a string\n  // one(callback) -> async, yields a string\n  var iface = null;\n  var callback = null;\n\n  if (arguments.length >= 1) {\n    if (typeof arguments[0] === \"function\") {\n      callback = arguments[0];\n    } else if (typeof arguments[0] === \"string\") {\n      iface = arguments[0];\n    }\n\n    if (arguments.length >= 2) {\n      if (typeof arguments[1] === \"function\") {\n        callback = arguments[1];\n      }\n    }\n  }\n\n  if (!callback) {\n    return util.promisify(function (callback) {\n      lib.one(iface, callback);\n    });\n  }\n\n  if (iface) {\n    lib.getMacAddress(iface, callback);\n    return;\n  }\n\n  var ifaces = lib.networkInterfaces();\n  var addresses = {};\n  var best = [];\n  var args = [];\n  Object.keys(ifaces).forEach(function (name) {\n    args.push(name);\n    var score = 0;\n    var iface = ifaces[name];\n\n    if (typeof iface.mac === \"string\" && iface.mac !== \"00:00:00:00:00:00\") {\n      addresses[name] = iface.mac;\n\n      if (iface.ipv4) {\n        score += 1;\n      }\n\n      if (iface.ipv6) {\n        score += 1;\n      }\n\n      if (goodIfaces.test(name)) {\n        score += 2;\n      }\n\n      if (badIfaces.test(name)) {\n        score -= 3;\n      }\n\n      best.push({\n        name: name,\n        score: score,\n        mac: iface.mac\n      });\n    }\n  });\n\n  if (best.length > 0) {\n    best.sort(function (left, right) {\n      // the following will sort items with a higher score to the beginning\n      var comparison = right.score - left.score;\n\n      if (comparison !== 0) {\n        return comparison;\n      }\n\n      if (left.name < right.name) {\n        return -1;\n      }\n\n      if (left.name > right.name) {\n        return 1;\n      }\n\n      return 0;\n    });\n    util.nextTick(callback.bind(null, null, best[0].mac));\n    return;\n  }\n\n  args.push(lib.getAllInterfaces);\n\n  var getMacAddress = function (d, cb) {\n    if (addresses[d]) {\n      cb(null, addresses[d]);\n      return;\n    }\n\n    lib.getMacAddress(d, cb);\n  };\n\n  util.iterate(args, getMacAddress, callback);\n};\n\nlib.all = function (callback) {\n  if (typeof callback !== \"function\") {\n    return util.promisify(lib.all);\n  }\n\n  var ifaces = lib.networkInterfaces();\n  var resolve = {};\n  Object.keys(ifaces).forEach(function (iface) {\n    if (!ifaces[iface].mac) {\n      resolve[iface] = lib.getMacAddress.bind(null, iface);\n    }\n  });\n\n  if (Object.keys(resolve).length === 0) {\n    if (typeof callback === \"function\") {\n      util.nextTick(callback.bind(null, null, ifaces));\n    }\n\n    return ifaces;\n  }\n\n  util.parallel(resolve, function (err, result) {\n    Object.keys(result).forEach(function (iface) {\n      ifaces[iface].mac = result[iface];\n    });\n\n    if (typeof callback === \"function\") {\n      callback(null, ifaces);\n    }\n  });\n  return null;\n};\n\nmodule.exports = lib;","map":{"version":3,"sources":["D:/Projects/Interview Task-1 (CircileDiGroup)/client/node_modules/macaddress/index.js"],"names":["util","require","lib","getMacAddress","getAllInterfaces","networkInterfaces","goodIfaces","RegExp","badIfaces","one","iface","callback","arguments","length","promisify","ifaces","addresses","best","args","Object","keys","forEach","name","push","score","mac","ipv4","ipv6","test","sort","left","right","comparison","nextTick","bind","d","cb","iterate","all","resolve","parallel","err","result","module","exports"],"mappings":"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","sourcesContent":["/* jshint node: true */\n\"use strict\";\n\nvar util = require(\"./lib/util.js\");\nvar lib = {};\n\nlib.getMacAddress     = require(\"./lib/getmacaddress.js\");\nlib.getAllInterfaces  = require(\"./lib/getallinterfaces.js\");\nlib.networkInterfaces = require(\"./lib/networkinterfaces.js\");\n\n// devices like en0 (mac), eth3 (linux), Ethernet (windows), etc. are preferred\nvar goodIfaces = new RegExp(\"^((en|eth)[0-9]+|ethernet)$\", \"i\");\n\n// https://github.com/scravy/node-macaddress/issues/32\nvar badIfaces = new RegExp(\"^(vboxnet[0-9]+)$\", \"i\");\n\nlib.one = function () {\n    // one() can be invoked in several ways:\n    // one() -> Promise<string>\n    // one(iface: string) -> Promise<string>\n    // one(iface: string, callback) -> async, yields a string\n    // one(callback) -> async, yields a string\n    var iface = null;\n    var callback = null;\n    if (arguments.length >= 1) {\n        if (typeof arguments[0] === \"function\") {\n            callback = arguments[0];\n        } else if (typeof arguments[0] === \"string\") {\n            iface = arguments[0];\n        }\n        if (arguments.length >= 2) {\n            if (typeof arguments[1] === \"function\") {\n                callback = arguments[1];\n            }\n        }\n    }\n    if (!callback) {\n        return util.promisify(function (callback) {\n            lib.one(iface, callback);\n        });\n    }\n    if (iface) {\n        lib.getMacAddress(iface, callback);\n        return;\n    }\n    var ifaces = lib.networkInterfaces();\n    var addresses = {};\n    var best = [];\n    var args = [];\n    Object.keys(ifaces).forEach(function (name) {\n        args.push(name);\n        var score = 0;\n        var iface = ifaces[name];\n        if (typeof iface.mac === \"string\" && iface.mac !== \"00:00:00:00:00:00\") {\n            addresses[name] = iface.mac;\n            if (iface.ipv4) {\n                score += 1;\n            }\n            if (iface.ipv6) {\n                score += 1;\n            }\n            if (goodIfaces.test(name)) {\n                score += 2;\n            }\n            if (badIfaces.test(name)) {\n                score -= 3;\n            }\n            best.push({\n                name: name,\n                score: score,\n                mac: iface.mac\n            });\n        }\n    });\n    if (best.length > 0) {\n        best.sort(function (left, right) {\n            // the following will sort items with a higher score to the beginning\n            var comparison = right.score - left.score;\n            if (comparison !== 0) {\n                return comparison;\n            }\n            if (left.name < right.name) {\n                return -1;\n            }\n            if (left.name > right.name) {\n                return 1;\n            }\n            return 0;\n        });\n        util.nextTick(callback.bind(null, null, best[0].mac));\n        return;\n    }\n    args.push(lib.getAllInterfaces);\n    var getMacAddress = function (d, cb) {\n        if (addresses[d]) {\n            cb(null, addresses[d]);\n            return;\n        }\n        lib.getMacAddress(d, cb);\n    };\n    util.iterate(args, getMacAddress, callback);\n};\n\nlib.all = function (callback) {\n    if (typeof callback !== \"function\") {\n        return util.promisify(lib.all);\n    }\n    var ifaces = lib.networkInterfaces();\n    var resolve = {};\n    Object.keys(ifaces).forEach(function (iface) {\n        if (!ifaces[iface].mac) {\n            resolve[iface] = lib.getMacAddress.bind(null, iface);\n        }\n    });\n    if (Object.keys(resolve).length === 0) {\n        if (typeof callback === \"function\") {\n            util.nextTick(callback.bind(null, null, ifaces));\n        }\n        return ifaces;\n    }\n    util.parallel(resolve, function (err, result) {\n        Object.keys(result).forEach(function (iface) {\n            ifaces[iface].mac = result[iface];\n        });\n        if (typeof callback === \"function\") {\n            callback(null, ifaces);\n        }\n    });\n    return null;\n};\n\nmodule.exports = lib;\n"]},"metadata":{},"sourceType":"script"}